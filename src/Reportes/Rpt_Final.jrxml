<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Jorge Villanueva\\Desktop\\TPS 2019\\Proyecto TPS\\ControlDeNotas-JJB\\src\\Reportes\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select alu.id_alumno,alu.alumno_nombre || ' ' || alu.alumno_apelidos as Alumno, gra.grado, sec.nombre_seccion, mg.anho,mt.materia_nombre,per.periodo,SUM(0.35*per.nota1+0.35*per.nota2+0.30*per.nota3) as Promedio from alumno alu
inner join nota nt on alu.id_alumno = nt.id_alumno
inner join periodo per on nt.id_nota = per.id_nota
inner join materia_grado mg on nt.id_materia_grado = mg.id_materia_grado
inner join materia mt  on mg.id_materia = mg.id_materia
inner join grado gra on mg.id_grado = gra.id_grado
inner join seccion sec on mg.id_seccion = sec.id_seccion
where per.periodo=1
Group by alu.id_alumno,alu.alumno_nombre, alu.alumno_apelidos, gra.grado, sec.nombre_seccion, mg.anho,mt.materia_nombre,per.periodo
order by alu.id_alumno, mt.materia_nombre,per.periodo]]>
	</queryString>
	<field name="ID_ALUMNO" class="java.math.BigDecimal"/>
	<field name="ALUMNO" class="java.lang.String"/>
	<field name="GRADO" class="java.lang.String"/>
	<field name="NOMBRE_SECCION" class="java.lang.String"/>
	<field name="ANHO" class="java.math.BigDecimal"/>
	<field name="MATERIA_NOMBRE" class="java.lang.String"/>
	<field name="PERIODO" class="java.math.BigDecimal"/>
	<field name="PROMEDIO" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="125" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="752" height="100"/>
				<subreportParameter name="SUBREPORT_DIR"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "ReporteFinal.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
